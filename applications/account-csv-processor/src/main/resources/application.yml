server:
  port: 0
spring:
  application:
    name: account-csv-processor
  config:
    import: "optional:configserver:http://localhost:8888/"
  redis:
    cluster:
      #      Comma-delimited list of host:port pairs.
      nodes: localhost:6379
  cloud:
    #    function.definition: saveFavoritesConsumer;orderConsumer
    function:
      definition: csvToAccount
    stream:
      function:
        bindings:
          csvToAccount-in-0: input
          csvToAccount-out-0: output
      #
      default:
        contentType: "application/json"
      bindings:
        input:
          destination: account.csv
          group: ${spring.application.name}
          consumer:
            concurrency: 1
        output:
          destination: account.json
      rabbit:
        default:
          group: ${spring.application.name}
          requiredGroups: true
          dlqQuorum:
            enabled:  true
          quorum:
            enabled: true
        bindings:
          input:
            consumer:
              autoBindDlq: true
              quorum.enabled: true
              dlqQuorum:
                enabled: true
              prefetch: 10000